# =============================================================================
# SafeOS Guardian - Production Environment Configuration
# =============================================================================
#
# Copy this file to .env and configure for your deployment.
#
# Required:
# - SAFEOS_DOMAIN: Your API domain for HTTPS
# - CORS_ORIGIN: Your GitHub Pages URL
#
# Optional:
# - Notification credentials (Twilio, Telegram)
# - VAPID keys for web push notifications
#

# =============================================================================
# Server Configuration
# =============================================================================

NODE_ENV=production

# API server port (internal, Caddy handles external)
SAFEOS_PORT=3001

# SQLite database path (persistent volume)
SAFEOS_DB_PATH=/app/db_data/safeos.sqlite3

# =============================================================================
# Domain & CORS Configuration
# =============================================================================

# Your API domain (for Caddy HTTPS)
# Example: safeos-api.yourdomain.com
SAFEOS_DOMAIN=safeos-api.yourdomain.com

# Frontend origin for CORS
# For GitHub Pages: https://yourusername.github.io
# For custom domain: https://safeos.yourdomain.com
CORS_ORIGIN=https://yourusername.github.io

# =============================================================================
# Ollama AI Configuration
# =============================================================================

# Ollama server (internal Docker network)
OLLAMA_HOST=http://ollama:11434

# Models to pre-pull on setup
# Options: moondream, llava:7b, llava:13b, bakllava
# Note: Larger models require more RAM
OLLAMA_MODELS=moondream

# =============================================================================
# Web Push Notifications (VAPID Keys)
# =============================================================================
#
# Generate with: npx web-push generate-vapid-keys
#
# Required for browser push notifications to work

VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_EMAIL=admin@yourdomain.com

# =============================================================================
# SMS Alerts via Twilio (Optional)
# =============================================================================
#
# Sign up at: https://www.twilio.com/
# Pricing: ~$0.01 per SMS

TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# Telegram Alerts (Optional)
# =============================================================================
#
# Create bot with @BotFather: https://t.me/BotFather
# Free unlimited messages

TELEGRAM_BOT_TOKEN=

# =============================================================================
# AI API Keys (Optional - for cloud fallback)
# =============================================================================
#
# Not required if using Ollama locally
# Useful as fallback when local AI is slow/unavailable

OPENROUTER_API_KEY=
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# =============================================================================
# Redis (Optional - for scaling)
# =============================================================================
#
# Enable with: docker compose -f docker-compose.prod.yml --profile with-redis up -d

REDIS_URL=redis://redis:6379

# =============================================================================
# Rate Limiting
# =============================================================================

# API rate limit (requests per minute per IP)
RATE_LIMIT_RPM=60

# =============================================================================
# Logging
# =============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# =============================================================================
# Security
# =============================================================================

# JWT secret for session tokens
# Generate with: openssl rand -hex 32
JWT_SECRET=

# Session expiry (in seconds, default 7 days)
SESSION_EXPIRY=604800
